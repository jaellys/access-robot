<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Blockly Demo: Resizable Blockly (Part 2)</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <!-- Change back to compressed for production-->
    <script src="blockly/blockly_uncompressed.js"></script>
	<script src="blockly/blocks/logic.js"></script>
    <script src="blockly/blocks/loops.js"></script>
    <script src="blockly/blocks/math.js"></script>
    <script src="blockly/blocks/text.js"></script>
    <script src="blockly/blocks/lists.js"></script>
    <script src="blockly/blocks/colour.js"></script>
    <script src="blockly/blocks/variables.js"></script>
    <script src="blockly/blocks/procedures.js"></script>
    <script src="blockly/javascript_compressed.js"></script>

    <script src="blockly/generators/javascript.js"></script>
	<script src="blockly/msg/js/en.js"></script>
	<script src="javascript.js"></script>
	<script src="customblocks.js"></script>

</head>

<body>


<!--The toolbox will be injected into this div-->
<div id="blocklyDiv" />

<button id="button_run" onclick="runCode()">
	Run Code Block!
</button>
<button id="button_bluetooth" onclick="configBluetooth()">
    Config Bluetooth!
</button>
<button id="button_toolbar" onclick="slideToolbar()">
    Slide Toolbar
</button>



<xml id="toolbox" style="background-color: blue;">
	<category name="Colors">
		<block type="color_red"></block>
		<block type="color_green"></block>
		<block type="color_blue"></block>
		<block type="color_black"></block>
		<block type="color_white"></block>
	</category>
	<category name="Logic">
        <block type="controls_if"></block>
        <block type="logic_compare"></block>
        <block type="logic_operation"></block>
        <block type="logic_negate"></block>
        <block type="logic_boolean"></block>
        <block type="logic_null"></block>
	</category>
    <category name="Loops">
        <block type="controls_repeat_ext"></block>
        <block type="controls_whileUntil"></block>
        <block type="controls_for"></block>
    </category>
    <category name="Constants">
        <block type="math_number_zero"></block>
    </category>
    <category name="Math">
        <block type="math_arithmetic"></block>
    </category>

    <category name="Methods">
        <block type="move_forward"></block>
        <block type="move_backward"></block>
        <block type="turn_left"></block>
        <block type="turn_right"></block>
        <block type="turn_right"></block>
        <block type="stop"></block>
        <block type="fade_light"></block>
        <block type="blink_light"></block>
	</category>

</xml>


<script>
    var blocklyDiv = document.getElementById('blocklyDiv');
    var workspace = Blockly.inject(blocklyDiv, {toolbox: document.getElementById('toolbox')});


   function runCode() {
      // Generate JavaScript code and run it.
      var code = Blockly.JavaScript.workspaceToCode(workspace);
      try {
        alert(code);
        //Android.talkToArduino(code);
        //eval(code);
      } catch (e) {
        alert(e);
      }
    }

    function configBluetooth() {
        try {
            Android.connectBluetooth();
        } catch (e) {
            alert(e);
        }

    }

    function slideToolbar(){

    }





</script>
</body>
</html>